<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><link rel="stylesheet" href="dmdoc.css"><title>/turf - Space Station 13</title></head><body><header><a href="index.html">Space Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="turf.html#var">Var Details</a> - <a href="turf.html#proc">Proc Details</a></header><main><h1>turf <aside>/<a href="turf.html">turf</a></aside><aside> inherits /<a href="atom.html">atom</a></aside> <a href="https://github.com/Baystation12/Baystation12/blob/8008417a9403acd63bbaf5f5e0a134fd5cfd1d01/code/game/turfs/turf.dm#L1"><img src="git.png" width="16" height="16" title="code/game/turfs/turf.dm 1"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="turf.html#var/above">above</a></th><td>Reference to any open turf that might be above us to speed up atom Entered() updates.</td></tr><tr><th><a href="turf.html#var/ambient_active">ambient_active</a></th><td>Do we have non-zero ambient light? Use [TURF_IS_AMBIENT_LIT] instead of reading this directly.</td></tr><tr><th><a href="turf.html#var/ao_overlays">ao_overlays</a></th><td>Current ambient occlusion overlays. Tracked so we can reverse them without dropping all priority overlays.</td></tr><tr><th><a href="turf.html#var/dangerous_objects">dangerous_objects</a></th><td>List of 'dangerous' objs that the turf holds that can cause something bad to happen when stepped on, used for AI mobs.</td></tr><tr><th><a href="turf.html#var/mimic_above_copy">mimic_above_copy</a></th><td>If this is a delegate (non-overwrite) Z-turf with a z-turf above, this is the delegate copy that's copying us.</td></tr><tr><th><a href="turf.html#var/mimic_proxy">mimic_proxy</a></th><td>If we're a non-overwrite z-turf, this holds the appearance of the bottom-most Z-turf in the z-stack.</td></tr><tr><th><a href="turf.html#var/mimic_underlay">mimic_underlay</a></th><td>If we're at the bottom of the stack, a proxy used to fake a below space turf.</td></tr><tr><th><a href="turf.html#var/shadower">shadower</a></th><td>Overlay used to multiply color of all OO overlays at once.</td></tr><tr><th><a href="turf.html#var/turf_fire">turf_fire</a></th><td>Reference to the turf fire on the turf</td></tr><tr><th><a href="turf.html#var/z_eventually_space">z_eventually_space</a></th><td>If this Z-turf leads to space, uninterrupted.</td></tr><tr><th><a href="turf.html#var/z_queued">z_queued</a></th><td>How many times this turf is currently queued - multiple queue occurrences are allowed to ensure update consistency.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="turf.html#proc/AdjacentQuick">AdjacentQuick</a></th><td>Quick adjacency (to turf):
If you are in the same turf, always true
If you are not adjacent, then false</td></tr><tr><th><a href="turf.html#proc/Adjacent_free_dir">Adjacent_free_dir</a></th><td>Similar to Adjacent, but checks if the path FROM src in an orthogonal direction THROUGH intermediate TO destination
is free without considering src turf</td></tr><tr><th><a href="turf.html#proc/ClickCross">ClickCross</a></th><td>This checks if you there is uninterrupted airspace between that turf and this one.
This is defined as any dense ATOM_FLAG_CHECKS_BORDER object, or any dense object without throwpass.
The border_only flag allows you to not objects (for source and destination squares)</td></tr><tr><th><a href="turf.html#proc/cleanup_zmimic">cleanup_zmimic</a></th><td>Cleans up Z-mimic objects for this turf. You shouldn't call this directly 99% of the time.</td></tr><tr><th><a href="turf.html#proc/disable_zmimic">disable_zmimic</a></th><td>Disables Z-mimic for a turf.</td></tr><tr><th><a href="turf.html#proc/enable_zmimic">enable_zmimic</a></th><td>Enables Z-mimic for a turf that didn't already have it enabled.</td></tr><tr><th><a href="turf.html#proc/is_safe_to_enter">is_safe_to_enter</a></th><td>Returns false if stepping into a tile would cause harm (e.g. open space while unable to fly, water tile while a slime, lava, etc).</td></tr><tr><th><a href="turf.html#proc/register_dangerous_object">register_dangerous_object</a></th><td>Tells the turf that it currently contains something that automated movement should consider if planning to enter the tile.
This uses lazy list macros to reduce memory footprint since for 99% of turfs the list would've been empty anyway.</td></tr><tr><th><a href="turf.html#proc/setup_zmimic">setup_zmimic</a></th><td>Sets up Z-mimic for this turf. You shouldn't call this directly 99% of the time.</td></tr><tr><th><a href="turf.html#proc/unregister_dangerous_object">unregister_dangerous_object</a></th><td>Similar to <code>register_dangerous_object()</code>, for when the dangerous object stops being dangerous/gets deleted/moved/etc.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/above"><aside class="declaration">var </aside>above <aside>– /<a href="turf.html">turf</a></aside> <a href="https://github.com/Baystation12/Baystation12/blob/8008417a9403acd63bbaf5f5e0a134fd5cfd1d01/code/modules/multiz/zmimic/mimic_turf.dm#L2"><img src="git.png" width="16" height="16" title="code/modules/multiz/zmimic/mimic_turf.dm 2"></a></h3><p>Reference to any open turf that might be above us to speed up atom Entered() updates.</p><h3 id="var/ambient_active"><aside class="declaration">var </aside>ambient_active <aside>– </aside> <a href="https://github.com/Baystation12/Baystation12/blob/8008417a9403acd63bbaf5f5e0a134fd5cfd1d01/code/modules/lighting/lighting_turf.dm#L16"><img src="git.png" width="16" height="16" title="code/modules/lighting/lighting_turf.dm 16"></a></h3><p>Do we have non-zero ambient light? Use [TURF_IS_AMBIENT_LIT] instead of reading this directly.</p><h3 id="var/ao_overlays"><aside class="declaration">var </aside>ao_overlays <aside>– /list</aside> <a href="https://github.com/Baystation12/Baystation12/blob/8008417a9403acd63bbaf5f5e0a134fd5cfd1d01/code/game/turfs/turf_ao.dm#L6"><img src="git.png" width="16" height="16" title="code/game/turfs/turf_ao.dm 6"></a></h3><p>Current ambient occlusion overlays. Tracked so we can reverse them without dropping all priority overlays.</p><h3 id="var/dangerous_objects"><aside class="declaration">var </aside>dangerous_objects <aside>– /list</aside> <a href="https://github.com/Baystation12/Baystation12/blob/8008417a9403acd63bbaf5f5e0a134fd5cfd1d01/code/game/turfs/turf.dm#L40"><img src="git.png" width="16" height="16" title="code/game/turfs/turf.dm 40"></a></h3><p>List of 'dangerous' objs that the turf holds that can cause something bad to happen when stepped on, used for AI mobs.</p><h3 id="var/mimic_above_copy"><aside class="declaration">var </aside>mimic_above_copy <aside>– /<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/openspace/turf_mimic</aside> <a href="https://github.com/Baystation12/Baystation12/blob/8008417a9403acd63bbaf5f5e0a134fd5cfd1d01/code/modules/multiz/zmimic/mimic_turf.dm#L9"><img src="git.png" width="16" height="16" title="code/modules/multiz/zmimic/mimic_turf.dm 9"></a></h3><p>If this is a delegate (non-overwrite) Z-turf with a z-turf above, this is the delegate copy that's copying us.</p><h3 id="var/mimic_proxy"><aside class="declaration">var </aside>mimic_proxy <aside>– /<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/openspace/turf_proxy</aside> <a href="https://github.com/Baystation12/Baystation12/blob/8008417a9403acd63bbaf5f5e0a134fd5cfd1d01/code/modules/multiz/zmimic/mimic_turf.dm#L5"><img src="git.png" width="16" height="16" title="code/modules/multiz/zmimic/mimic_turf.dm 5"></a></h3><p>If we're a non-overwrite z-turf, this holds the appearance of the bottom-most Z-turf in the z-stack.</p><h3 id="var/mimic_underlay"><aside class="declaration">var </aside>mimic_underlay <aside>– /<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/openspace/turf_proxy</aside> <a href="https://github.com/Baystation12/Baystation12/blob/8008417a9403acd63bbaf5f5e0a134fd5cfd1d01/code/modules/multiz/zmimic/mimic_turf.dm#L11"><img src="git.png" width="16" height="16" title="code/modules/multiz/zmimic/mimic_turf.dm 11"></a></h3><p>If we're at the bottom of the stack, a proxy used to fake a below space turf.</p><h3 id="var/shadower"><aside class="declaration">var </aside>shadower <aside>– /<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/openspace/multiplier</aside> <a href="https://github.com/Baystation12/Baystation12/blob/8008417a9403acd63bbaf5f5e0a134fd5cfd1d01/code/modules/multiz/zmimic/mimic_turf.dm#L7"><img src="git.png" width="16" height="16" title="code/modules/multiz/zmimic/mimic_turf.dm 7"></a></h3><p>Overlay used to multiply color of all OO overlays at once.</p><h3 id="var/turf_fire"><aside class="declaration">var </aside>turf_fire <aside>– /<a href="obj.html">obj</a>/<a href="obj/turf_fire.html">turf_fire</a></aside> <a href="https://github.com/Baystation12/Baystation12/blob/8008417a9403acd63bbaf5f5e0a134fd5cfd1d01/code/game/turfs/turf.dm#L48"><img src="git.png" width="16" height="16" title="code/game/turfs/turf.dm 48"></a></h3><p>Reference to the turf fire on the turf</p><h3 id="var/z_eventually_space"><aside class="declaration">var </aside>z_eventually_space <aside>– </aside> <a href="https://github.com/Baystation12/Baystation12/blob/8008417a9403acd63bbaf5f5e0a134fd5cfd1d01/code/modules/multiz/zmimic/mimic_turf.dm#L15"><img src="git.png" width="16" height="16" title="code/modules/multiz/zmimic/mimic_turf.dm 15"></a></h3><p>If this Z-turf leads to space, uninterrupted.</p><h3 id="var/z_queued"><aside class="declaration">var </aside>z_queued <aside>– </aside> <a href="https://github.com/Baystation12/Baystation12/blob/8008417a9403acd63bbaf5f5e0a134fd5cfd1d01/code/modules/multiz/zmimic/mimic_turf.dm#L13"><img src="git.png" width="16" height="16" title="code/modules/multiz/zmimic/mimic_turf.dm 13"></a></h3><p>How many times this turf is currently queued - multiple queue occurrences are allowed to ensure update consistency.</p><h2 id="proc">Proc Details</h2><h3 id="proc/AdjacentQuick"><aside class="declaration">proc </aside>AdjacentQuick<aside>(/<a href="atom.html">atom</a>/neighbor, /<a href="atom.html">atom</a>/target)  <a href="https://github.com/Baystation12/Baystation12/blob/8008417a9403acd63bbaf5f5e0a134fd5cfd1d01/code/_onclick/adjacent.dm#L93"><img src="git.png" width="16" height="16" title="code/_onclick/adjacent.dm 93"></a></aside></h3><p>Quick adjacency (to turf):
If you are in the same turf, always true
If you are not adjacent, then false</p><h3 id="proc/Adjacent_free_dir"><aside class="declaration">proc </aside>Adjacent_free_dir<aside>(/<a href="atom.html">atom</a>/destination, path_dir)  <a href="https://github.com/Baystation12/Baystation12/blob/8008417a9403acd63bbaf5f5e0a134fd5cfd1d01/code/_onclick/adjacent.dm#L64"><img src="git.png" width="16" height="16" title="code/_onclick/adjacent.dm 64"></a></aside></h3><p>Similar to Adjacent, but checks if the path FROM src in an orthogonal direction THROUGH intermediate TO destination
is free without considering src turf</p><h3 id="proc/ClickCross"><aside class="declaration">proc </aside>ClickCross<aside>(target_dir, border_only, /<a href="atom.html">atom</a>/target_atom)  <a href="https://github.com/Baystation12/Baystation12/blob/8008417a9403acd63bbaf5f5e0a134fd5cfd1d01/code/_onclick/adjacent.dm#L133"><img src="git.png" width="16" height="16" title="code/_onclick/adjacent.dm 133"></a></aside></h3><p>This checks if you there is uninterrupted airspace between that turf and this one.
This is defined as any dense ATOM_FLAG_CHECKS_BORDER object, or any dense object without throwpass.
The border_only flag allows you to not objects (for source and destination squares)</p><h3 id="proc/cleanup_zmimic"><aside class="declaration">proc </aside>cleanup_zmimic<aside>()  <a href="https://github.com/Baystation12/Baystation12/blob/8008417a9403acd63bbaf5f5e0a134fd5cfd1d01/code/modules/multiz/zmimic/mimic_turf.dm#L91"><img src="git.png" width="16" height="16" title="code/modules/multiz/zmimic/mimic_turf.dm 91"></a></aside></h3><p>Cleans up Z-mimic objects for this turf. You shouldn't call this directly 99% of the time.</p><h3 id="proc/disable_zmimic"><aside class="declaration">proc </aside>disable_zmimic<aside>()  <a href="https://github.com/Baystation12/Baystation12/blob/8008417a9403acd63bbaf5f5e0a134fd5cfd1d01/code/modules/multiz/zmimic/mimic_turf.dm#L49"><img src="git.png" width="16" height="16" title="code/modules/multiz/zmimic/mimic_turf.dm 49"></a></aside></h3><p>Disables Z-mimic for a turf.</p><h3 id="proc/enable_zmimic"><aside class="declaration">proc </aside>enable_zmimic<aside>(additional_flags)  <a href="https://github.com/Baystation12/Baystation12/blob/8008417a9403acd63bbaf5f5e0a134fd5cfd1d01/code/modules/multiz/zmimic/mimic_turf.dm#L40"><img src="git.png" width="16" height="16" title="code/modules/multiz/zmimic/mimic_turf.dm 40"></a></aside></h3><p>Enables Z-mimic for a turf that didn't already have it enabled.</p><h3 id="proc/is_safe_to_enter"><aside class="declaration">proc </aside>is_safe_to_enter<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/L)  <a href="https://github.com/Baystation12/Baystation12/blob/8008417a9403acd63bbaf5f5e0a134fd5cfd1d01/code/game/turfs/turf.dm#L378"><img src="git.png" width="16" height="16" title="code/game/turfs/turf.dm 378"></a></aside></h3><p>Returns false if stepping into a tile would cause harm (e.g. open space while unable to fly, water tile while a slime, lava, etc).</p><h3 id="proc/register_dangerous_object"><aside class="declaration">proc </aside>register_dangerous_object<aside>(/<a href="obj.html">obj</a>/O)  <a href="https://github.com/Baystation12/Baystation12/blob/8008417a9403acd63bbaf5f5e0a134fd5cfd1d01/code/game/turfs/turf.dm#L389"><img src="git.png" width="16" height="16" title="code/game/turfs/turf.dm 389"></a></aside></h3><p>Tells the turf that it currently contains something that automated movement should consider if planning to enter the tile.
This uses lazy list macros to reduce memory footprint since for 99% of turfs the list would've been empty anyway.</p><h3 id="proc/setup_zmimic"><aside class="declaration">proc </aside>setup_zmimic<aside>(mapload)  <a href="https://github.com/Baystation12/Baystation12/blob/8008417a9403acd63bbaf5f5e0a134fd5cfd1d01/code/modules/multiz/zmimic/mimic_turf.dm#L58"><img src="git.png" width="16" height="16" title="code/modules/multiz/zmimic/mimic_turf.dm 58"></a></aside></h3><p>Sets up Z-mimic for this turf. You shouldn't call this directly 99% of the time.</p><h3 id="proc/unregister_dangerous_object"><aside class="declaration">proc </aside>unregister_dangerous_object<aside>(/<a href="obj.html">obj</a>/O)  <a href="https://github.com/Baystation12/Baystation12/blob/8008417a9403acd63bbaf5f5e0a134fd5cfd1d01/code/game/turfs/turf.dm#L397"><img src="git.png" width="16" height="16" title="code/game/turfs/turf.dm 397"></a></aside></h3><p>Similar to <code>register_dangerous_object()</code>, for when the dangerous object stops being dangerous/gets deleted/moved/etc.</p></main><footer>baystation12.dme <a href="https://github.com/Baystation12/Baystation12/tree/8008417a9403acd63bbaf5f5e0a134fd5cfd1d01">8008417</a> (dev) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.9.0</a></footer></body></html>