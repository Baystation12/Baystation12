# United Kingdom of Soviet Station 13 (Baystation 12 Fork)

[Вебсайт](http://sovietstation.ru/) - [Код](https://github.com/AndyAdjutor/SovietBay) - [Вики](http://wiki.sovietstation.ru/)

---
!ВНИМАНИЕ! 
Перед редактированием карты обязательно используйте mapmerge! Расположена по следующему пути: "/tools/mapmerge". Инструкция на русском находится там же.
!ВНИМАНИЕ!
---

### КАК ПОЛУЧИТЬ КОД
Простейший путь для получения master-ветки это скачивание его в .zip архиве.

[Нажмите сюда](https://github.com/AndyAdjutor/SovietBay/archive/master.zip) чтобы получить .zip архив master-ветки.

Более усложненный путь, но простой для обновления с веткой (А не постоянным скачиванием .zip архива) - это использовать Git. Скачайте клиент Git - [нажмите сюда](http://git-scm.com/). Когда вы его установите, нажмите правой кнопкой мыши на любу папку и кликните на "Git Bash".  Когда откроется консоль, напишите:

    git clone https://github.com/AndyAdjutor/SovietBay.git

(Подсказка: Удерживайте CTRL и нажмите Insert, чтобы скопировать в консоль Git Bash)

Теперь вам нужно немного подождать для закачивания (Вы скачиваете все ветки, а они весят пол гигабайта), зато вы сможете обновляться с нашим репозиторием.

### УСТАНОВКА

Первая установка вполне простая.  Первое, вам нужен BYOND. Скачайте его [отсюда](http://www.byond.com/).

Это только сырой, скаченный код. Вам нужно его скомпилировать.  Откройте baystation12.dme двойным кликом на левую кнопку мыши, откройте вкладку "Build", и нажмите "Compile". Если все действия вы выполнили правильно, то в дебаггере (экран вывода ниже) высветится это:

    saving baystation12.dmb (DEBUG mode)
    
    baystation12.dmb - 0 errors, 0 warnings

Если дебаггер вам сообщил о каких-то ошибках, то возможно файл был поврежден при закачке, или вы что-то неправильно модифицировали в коде, а также может быть проблема в нашем репозитории. Спрашивайте в TeamSpeak.

Как только вы скомпилируете код, откройте папку "Config". Перенесите все файлы с папки "Example" в саму папку "Config". В ней можно будет выставить определенные переменные, вроде локации сервера (для того, что-б игроки в конце раунда не вылетали) или вероятность игровых режимов.

Конечно, еще нужно отредактировать admins.txt, чтобы убрать администраторов Baystation 12 и добавить самого себя. "Game Master" это наивысший уровень доступа. Формат записи такой:

    byondkey - Rank

где BYOND key (Ваше никнейм в BYOND) должен быть в маленьком регистре, а администраторский ранг написан точь в точь с регистром.

Ну, и для того, чтобы запустить сервер - вам нужно запустить Dream Daemon (В папке BYOND, панель "Пуск") и прописать путь к вашему скомпилированному файлу "baystation12.dmb". Удостверьтесь, что порт соответствует тому, который вы вписали в config.txt (Для одиночного тестирования - нажмите кнопку перехода (Желтенькая) или впишите localhost в Open Location, без всяких конфигураций в config.txt), и поставили "Security Box" на "Trusted". Нажимайте GO и сервер должен запуститься.

---

### ОБНОВЛЕНИЕ

Для обновления, сделайте резервные копии папок /config и /data,
так как они содержат конфигурации сервера, сохранения игроков и банлисты.

Если вы использовали метод .zip архива, вам нужно снова скачать .zip архив с репозитория и распаковать его где-нибудь, после скопировать папки /config и /data туда.

Если вы использовали метод с помощью Git, вам нужно просто вписать следующую команду в консоль Git Bash (предварительно указав путь к вашему репозиторию):

    git pull

Когда вы это закончите, скопируйте папки /data и /config туда, просто, на всякий случай.

После вновь скомпилируйте код, и все будет хорошо.


### Установка SQL

База SQL необходима для работы Библиотеки (методом MySQL) и статистики игроков. Для самой базы SQL необходим MySQL сервер. Конфигурация для БД SQL расположена здесь: "/config/dbconfig.txt", а схема БД SQL тут - /SQL/tgstation.schema.sql
Более подробную информацию спрашивайте в нашем TeamSpeak